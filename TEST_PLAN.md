# 测试计划 - PWA彩票选号助手

## 🧪 功能测试清单

### 1️⃣ 基础选号功能测试

#### 测试步骤
```
□ 启动应用：npm run dev
□ 访问 http://localhost:3000
```

#### 选号功能测试
```
□ 红球选号：
  □ 点击红球01，验证选中状态（变为选中色、有光晕）
  □ 连续点击红球02-06，验证达到6个后其他球禁用
  □ 点击已选中的红球，验证取消选择
  □ 验证底部显示已选红球号码
  □ 验证进度显示（如：3/6）

□ 蓝球选号：
  □ 点击蓝球08，验证选中状态
  □ 点击另一个蓝球，验证替换（最多选1个）
  □ 点击已选中的蓝球，验证取消选择
  □ 验证底部显示已选蓝球号码
  □ 验证进度显示（如：1/1）

□ 清除选择：
  □ 点击"清除"按钮
  □ 验证所有已选号码清空
  □ 验证所有球体恢复未选中状态
```

#### 验证测试
```
□ 尝试选择超过限制的号码，验证被阻止
□ 选号不完整时，验证"保存"按钮禁用状态
□ 红球和蓝球都选满时，验证"保存"按钮可用
```

---

### 2️⃣ 随机选号功能测试

#### 策略选择弹窗测试
```
□ 点击"随机"按钮，验证策略弹窗显示
□ 验证弹窗包含3个策略选项：
  □ 平衡奇偶 ⚖️
  □ 和值范围 📊
  □ 完全随机 🎲
□ 验证每个策略有名称和说明
□ 点击弹窗外区域，验证弹窗关闭
□ 点击"取消"或关闭图标，验证弹窗关闭
```

#### 随机选号测试
```
□ 平衡奇偶策略：
  □ 点击"平衡奇偶"
  □ 验证生成6个红球
  □ 验证红球奇偶比例接近3:3（±1）
  □ 验证生成1个蓝球
  □ 验证弹窗关闭
  □ 验证显示"随机选号成功"提示

□ 和值范围策略：
  □ 点击"和值范围"
  □ 验证生成6个红球
  □ 计算红球和值，验证在80-120之间
  □ 验证生成1个蓝球
  □ 验证弹窗关闭
  □ 验证显示"随机选号成功"提示

□ 完全随机策略：
  □ 点击"完全随机"
  □ 验证生成6个红球
  □ 验证生成1个蓝球
  □ 验证弹窗关闭
  □ 验证显示"随机选号成功"提示
```

---

### 3️⃣ 历史记录功能测试

#### 保存记录测试
```
□ 完成选号（红球6个+蓝球1个）
□ 点击"保存"按钮
□ 验证跳转到历史记录页面
□ 验证显示"保存成功"提示
□ 验证历史记录列表包含新记录
□ 验证记录按日期倒序排列
□ 验证记录显示：
  □ 日期（完整日期+星期）
  □ 彩票类型（双色球/大乐透）
  □ 您的号码（红球+蓝球）
  □ 复制按钮
```

#### 历史记录列表测试
```
□ 点击"历史"标签页
□ 验证显示历史记录列表
□ 验证每条记录包含：
  □ 删除按钮
  □ 彩票类型徽章
  □ 您的号码（带颜色渐变）
  □ "未开奖"状态（或开奖信息）
□ 验证记录按日期倒序排列
□ 验证显示记录总数
```

#### 删除记录测试
```
□ 点击某条记录的删除按钮
□ 验证显示确认对话框
□ 点击"确定"
□ 验证记录从列表中移除
□ 验证显示"记录已删除"提示
□ 刷新页面，验证记录仍然被删除（localStorage持久化）
```

#### 清空历史测试
```
□ 点击"清空"按钮
□ 验证按钮文字变为"确定清空"
□ 点击"确定清空"
□ 验证所有记录被删除
□ 验证显示"历史记录已清空"提示
□ 验证列表显示"暂无历史记录"
```

---

### 4️⃣ 开奖结果查询测试（需要配置API）

#### API配置测试
```
□ 检查.env文件是否配置API_KEY
□ 访问 https://www.juhe.cn/ 检查API状态
□ 确保API额度充足（免费100次/天）
```

#### 查询开奖测试
```
□ 点击"检查开奖"按钮
□ 验证按钮显示加载状态（旋转图标）
□ 等待查询完成
□ 验证按钮恢复原始状态
```

#### 开奖结果显示测试
```
□ 如果有开奖结果：
  □ 验证显示"开奖号码"区域
  □ 验证开奖号码显示（透明度70%）
  □ 验证命中号码显示金色并带光晕
  □ 验证未命中号码保持原色
  □ 验证显示命中数量（如：命中4个红球，0个蓝球）
  □ 验证显示中奖等级（如：四等奖）
  
□ 如果无开奖结果：
  □ 验证显示"未开奖"状态
  □ 验证不显示开奖号码区域
```

#### 缓存功能测试
```
□ 首次查询开奖后，刷新页面
□ 验证开奖结果立即显示（从缓存加载）
□ 验证不触发API请求
□ 验证缓存有效期为7天
□ 清除浏览器缓存，验证触发新的API请求
```

---

### 5️⃣ 剪贴板复制功能测试

#### 选号页面复制测试
```
□ 完成选号后，点击"复制"按钮
□ 验证按钮显示"复制中..."
□ 验证按钮显示"✓ 已复制"
□ 粘贴到文本编辑器
□ 验证格式正确：
  红球: 05 12 18
  蓝球: 08
```

#### 历史记录复制测试
```
□ 点击某条记录的"复制"按钮
□ 验证复制成功
□ 粘贴验证格式正确
□ 如果有开奖结果，验证开奖号码也被复制
```

---

### 6️⃣ 个性化设置功能测试

#### 进入设置测试
```
□ 点击"设置"标签页
□ 验证显示设置页面
□ 验证显示返回按钮
□ 验证显示"保存"按钮
```

#### 生日设置测试
```
□ 验证月份下拉框显示1-12月
□ 验证日期下拉框显示1-31日
□ 验证默认显示12月10日
□ 验证自动识别显示"射手座"
□ 修改为其他日期（如：3月21日）
□ 验证自动识别更新（白羊座）
□ 点击"保存"
□ 验证显示"设置已保存"提示
□ 返回首页，验证主题色更新
```

#### 幸运色计算测试
```
□ 验证显示"幸运色主题"区域
□ 验证显示主色调颜色预览
□ 验证显示星座幸运色说明
□ 验证显示五行命理说明
□ 验证显示数字命理说明
□ 验证显示木质/紫色系色卡
```

#### 数据管理测试
```
□ 验证显示历史记录数量
□ 验证显示存储空间占用
□ 点击"清空"
□ 验证显示确认对话框
□ 确认后，验证历史记录被清空
□ 验证显示"历史记录已清空"提示
```

---

### 7️⃣ PWA功能测试

#### 安装测试
```
□ 在Chrome浏览器中打开应用
□ 地址栏右侧点击"安装"图标
□ 点击"安装"
□ 验证应用安装到桌面
□ 点击桌面图标启动
□ 验证应用以独立窗口打开
□ 验证地址栏不显示URL
```

#### 离线测试
```
□ 打开浏览器开发者工具
□ 切换到Network标签
□ 勾选"Offline"模式
□ 刷新页面
□ 验证应用仍可正常使用
□ 测试选号功能
□ 测试历史记录查看
□ 取消"Offline"，验证恢复正常
```

#### Service Worker测试
```
□ 在开发者工具中查看Application
□ 点击Service Workers
□ 验证Service Worker已注册
□ 验证Cache Storage包含资源
□ 验证更新策略为autoUpdate
```

#### Manifest测试
```
□ 在开发者工具中查看Manifest
□ 验证name为"彩票选号助手"
□ 验证short_name为"选号助手"
□ 验证theme_color为#8E44AD
□ 验证display为standalone
□ 验证icons包含所有尺寸
```

---

### 8️⃣ 响应式设计测试

#### 手机端测试（iPhone尺寸: 375x667）
```
□ 验证布局适配
□ 验证球体按钮大小适中
□ 验证底部操作栏不遮挡内容
□ 验证标签页导航可点击
□ 验证横向滚动流畅
```

#### 平板端测试（iPad尺寸: 768x1024）
```
□ 验证布局居中显示
□ 验证充分利用屏幕空间
□ 验证球体网格合理分布
□ 验证字体大小适中
```

#### 桌面端测试（1920x1080）
```
□ 验证最大宽度限制（避免过度拉伸）
□ 验证内容居中
□ 验证在大屏上美观
```

---

### 9️⃣ 性能测试

#### Lighthouse测试
```
□ 打开Chrome开发者工具
□ 点击Lighthouse标签
□ 点击"Generate report"
□ 验证Performance分数 > 90
□ 验证Accessibility分数 > 90
□ 验证Best Practices分数 > 90
□ 验证SEO分数 > 90
□ 验证PWA分数 = 100
```

#### 加载性能测试
```
□ 清除浏览器缓存
□ 打开Network标签
□ 刷新页面
□ 验证首次加载时间 < 3秒
□ 验证DOM Content Loaded < 2秒
□ 验证资源总大小 < 500KB
```

---

### 🔟 边界情况测试

#### 选号边界测试
```
□ 快速连续点击同一球体多次
  □ 验证只触发一次选择
□ 选满6个红球后，点击其他红球
  □ 验证不被选中
□ 选满1个蓝球后，点击其他蓝球
  □ 验证不被选中
□ 刷新页面
  □ 验证选号状态丢失（预期行为）
```

#### 历史记录边界测试
```
□ 保存多条记录（如20条）
□ 验证列表正常显示
□ 验证滚动流畅
□ 删除第一条记录
□ 验证剩余19条记录正确显示
□ 清空所有记录
□ 验证显示"暂无历史记录"
```

#### API边界测试
```
□ 不配置API_KEY时查询开奖
  □ 验证显示"未开奖"（不崩溃）
□ API达到限额时
  □ 验证显示友好提示
□ 网络断开时查询开奖
  □ 验证显示网络错误提示
□ API响应超时
  □ 验证显示超时提示
```

---

## ✅ 测试验收标准

### 功能完整性
- [ ] 所有核心功能正常工作
- [ ] 无JavaScript控制台错误
- [ ] 无明显的UI/UX问题

### 性能指标
- [ ] Lighthouse分数 > 90
- [ ] 首屏加载 < 3秒
- [ ] PWA安装成功

### 兼容性
- [ ] Chrome >= 90 可正常使用
- [ ] Safari >= 15 可正常使用
- [ ] Firefox >= 88 可正常使用
- [ ] Edge >= 90 可正常使用

### PWA验证
- [ ] 可离线使用
- [ ] 可安装到桌面
- [ ] 可添加到主屏幕（移动端）
- [ ] Service Worker正常工作

---

## 🐛 问题记录

### 发现的问题

| ID | 问题描述 | 严重程度 | 状态 | 修复方案 |
|-----|---------|---------|------|---------|
|     |         |         |      |         |

### 已修复的问题

| ID | 问题描述 | 修复方案 |
|-----|---------|---------|
|     |         |         |

---

## 📊 测试总结

### 测试日期
- 测试人员：
- 测试环境：
- 浏览器版本：

### 测试结果
- 功能测试通过率：___%
- 性能测试通过率：___%
- PWA测试通过率：___%
- 总体通过率：___%

### 建议
1. 
2. 
3. 

---

**测试完成签名**：________________________
**测试日期**：________________________
